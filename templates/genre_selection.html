{% extends "base.html" %}
{% block title %}Genre Selection{% endblock %}
{% block content %}

<!-- Optional: Style for cursor and dimming disabled checkboxes -->
<style>
    .form-check-input:disabled {
        cursor: not-allowed;
        opacity: 0.5;
    }
</style>

<h1><b>Recommendation Questionnaire</b></h1>
<h3>Please select up to 5 of your favorite movie genres.</h3>
<br>
<form method="POST" action="/liked-movies">
    <div class="form-group">
        {% for genre in genres %}
        <div class="form-check">
            <input class="form-check-input genre-checkbox " type="checkbox" name="genres" value="{{ genre }}">
            <label class="form-check-label">
                {{ genre|upper }}
            </label>
        </div>
        {% endfor %}
    </div>
    <br>
    <button type="submit" class="btn btn-primary">Next</button>
</form>

<!-- JavaScript to limit checkbox selection to 5 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const checkboxes = document.querySelectorAll('.genre-checkbox');

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const checkedCount = document.querySelectorAll('.genre-checkbox:checked').length;
                checkboxes.forEach(cb => {
                    if (!cb.checked) cb.disabled = checkedCount >= 5;
                    else cb.disabled = false;
                });
            });
        });
    });
</script>

{% endblock %}
