{% extends "base.html" %}
{% block title %}Genre Selection{% endblock %}
{% block content %}
<h1><b>Recommendation Questionnaire</b></h1>
<h3>Please select up to 5 of your favorite movie genres.</h3>
<br>
<form method="POST" action="/liked-movies">
    {% for genre in genres %}
    <label>
        <input type="checkbox" name="genres" value="{{ genre }}"> {{ genre|capitalize }}
    </label><br>
    {% endfor %}
    <br>
    <button type="submit">Next</button>
</form>
{% endblock %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        const maxChecked = 5;

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const checkedCount = document.querySelectorAll('input[type="checkbox"]:checked').length;
                if (checkedCount > maxChecked) {
                    checkbox.checked = false;
                    alert(`You can only select up to ${maxChecked} genres.`);
                }
            });
        });
    });
</script>